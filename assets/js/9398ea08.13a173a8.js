"use strict";(self.webpackChunkGATK_SV=self.webpackChunkGATK_SV||[]).push([[730],{929:(e,i,l)=>{l.r(i),l.d(i,{assets:()=>s,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"modules/gather_sample_evidence","title":"GatherSampleEvidence","description":"Gather Sample Evidence","source":"@site/docs/modules/gather_sample_evidence.md","sourceDirName":"modules","slug":"/modules/gse","permalink":"/gatk-sv/docs/modules/gse","draft":false,"unlisted":false,"editUrl":"https://github.com/broadinstitute/gatk-sv/tree/master/website/docs/modules/gather_sample_evidence.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"GatherSampleEvidence","description":"Gather Sample Evidence","sidebar_position":1,"slug":"gse"},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/gatk-sv/docs/modules/"},"next":{"title":"EvidenceQC","permalink":"/gatk-sv/docs/modules/eqc"}}');var r=l(4848),o=l(8453),c=l(1944);const t={title:"GatherSampleEvidence",description:"Gather Sample Evidence",sidebar_position:1,slug:"gse"},a=void 0,s={},d=[{value:"Inputs",id:"inputs",level:3},{value:"<code>bam_or_cram_file</code>",id:"bam_or_cram_file",level:4},{value:"<code>sample_id</code>",id:"sample_id",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>is_dragen_3_7_8</code>",id:"optional-is_dragen_3_7_8",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>collect_coverage</code>",id:"collect-coverage",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>collect_pesr</code>",id:"collect-pesr",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>manta_docker</code>",id:"manta-docker",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>melt_docker</code>",id:"melt-docker",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>scramble_docker</code>",id:"scramble-docker",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>wham_docker</code>",id:"wham-docker",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>reference_bwa_*</code>",id:"optional-reference_bwa_",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>scramble_alignment_score_cutoff</code>",id:"optional-scramble_alignment_score_cutoff",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>scramble_percent_align_cutoff</code>",id:"optional-scramble_percent_align_cutoff",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>scramble_min_clipped_reads_fraction</code>",id:"optional-scramble_min_clipped_reads_fraction",level:4},{value:"Advanced parameters",id:"advanced-parameters",level:3},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>run_localize_reads</code>",id:"optional-run_localize_reads",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>run_module_metrics</code>",id:"optional-run_module_metrics",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>move_bam_or_cram_files</code>",id:"optional-move_bam_or_cram_files",level:4},{value:"Outputs",id:"outputs",level:3},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>manta_vcf</code>",id:"manta-vcf",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>melt_vcf</code>",id:"melt-vcf",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>scramble_vcf</code>",id:"scramble-vcf",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>wham_vcf</code>",id:"wham-vcf",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg>  <code>coverage_counts</code>",id:"coverage-counts",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg>  <code>pesr_disc</code>",id:"pesr-disc",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg>  <code>pesr_split</code>",id:"pesr-split",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg>  <code>pesr_sd</code>",id:"pesr-sd",level:4},{value:"<HighlightOptionalArg>Optional</HighlightOptionalArg> <code>sample_metrics_files</code>",id:"optional-sample_metrics_files",level:4}];function h(e){const i={a:"a",admonition:"admonition",code:"code",h3:"h3",h4:"h4",mermaid:"mermaid",p:"p",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{children:(0,r.jsx)(i.a,{href:"https://github.com/broadinstitute/gatk-sv/blob/main/wdl/GatherSampleEvidence.wdl",children:"WDL source code"})}),"\n",(0,r.jsxs)(i.p,{children:["Runs raw evidence collection (PE/SR/RD/SD) on each sample and performs SV discovery with the following callers:\nManta, Wham, and Scramble. For guidance on pre-filtering prior to GatherSampleEvidence, refer to the\n",(0,r.jsx)(i.a,{href:"/docs/gs/inputs",children:"Input data"})," section."]}),"\n",(0,r.jsx)(i.admonition,{type:"note",children:(0,r.jsxs)(i.p,{children:["MELT is no longer supported as a raw caller. Please see ",(0,r.jsx)(i.a,{href:"/docs/gs/sv_callers",children:"SV/CNV callers"})," for more information."]})}),"\n",(0,r.jsx)(i.admonition,{type:"note",children:(0,r.jsxs)(i.p,{children:["By default, GATK-SV runs Manta on the raw calls. However, if you already have DRAGEN-SV calls for the samples, you\ncan skip running Manta by setting ",(0,r.jsx)(i.code,{children:"manta_docker"})," to null."]})}),"\n",(0,r.jsx)(i.p,{children:"The following diagram illustrates the recommended invocation order:"}),"\n",(0,r.jsx)(i.mermaid,{value:"\nstateDiagram\n  direction LR\n  \n  classDef inModules stroke-width:0px,fill:#caf0f8,color:#00509d\n  classDef thisModule font-weight:bold,stroke-width:0px,fill:#ff9900,color:white\n  classDef outModules stroke-width:0px,fill:#caf0f8,color:#00509d\n\n  gse: GatherSampleEvidence\n  eqc: EvidenceQC\n  gse --\x3e eqc\n  \n  class gse thisModule\n  class eqc outModules"}),"\n",(0,r.jsx)(i.h3,{id:"inputs",children:"Inputs"}),"\n",(0,r.jsx)(i.h4,{id:"bam_or_cram_file",children:(0,r.jsx)(i.code,{children:"bam_or_cram_file"})}),"\n",(0,r.jsxs)(i.p,{children:["An indexed BAM or CRAM file aligned to hg38. See ",(0,r.jsx)(i.a,{href:"/docs/gs/inputs",children:"input data requirements"}),"."]}),"\n",(0,r.jsx)(i.h4,{id:"sample_id",children:(0,r.jsx)(i.code,{children:"sample_id"})}),"\n",(0,r.jsxs)(i.p,{children:["Identifier string for the sample. Refer to the ",(0,r.jsx)(i.a,{href:"/docs/gs/inputs#sampleids",children:"sample ID requirements"}),"\nfor specifications of allowable sample IDs. IDs that do not meet these requirements may lead to errors."]}),"\n",(0,r.jsxs)(i.h4,{id:"optional-is_dragen_3_7_8",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"is_dragen_3_7_8"})]}),"\n",(0,r.jsx)(i.p,{children:"Default: detect automtically from BAM/CRAM header. The header check can be skippped by setting this parameter when it\nis known whether the BAM/CRAM is aligned with Dragen v3.7.8. If this is true and Scramble is configured to run then\nsoft-clipped reads at sites called by Scramble in the original alignments will be realigned with BWA for re-calling with\nScramble."}),"\n",(0,r.jsxs)(i.h4,{id:"collect-coverage",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"collect_coverage"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"true"}),". Collect read depth."]}),"\n",(0,r.jsxs)(i.h4,{id:"collect-pesr",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"collect_pesr"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"true"}),". Collect paired-end (PE) split-read (SR), and site depth (SD) evidence."]}),"\n",(0,r.jsxs)(i.h4,{id:"manta-docker",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"manta_docker"})]}),"\n",(0,r.jsx)(i.p,{children:"Manta docker image. If provided, runs the Manta tool."}),"\n",(0,r.jsxs)(i.h4,{id:"melt-docker",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"melt_docker"})]}),"\n",(0,r.jsx)(i.p,{children:"MELT docker image. If provided, runs the MELT tool."}),"\n",(0,r.jsxs)(i.h4,{id:"scramble-docker",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"scramble_docker"})]}),"\n",(0,r.jsx)(i.p,{children:"Scramble docker image. If provided, runs the Scramble tool."}),"\n",(0,r.jsxs)(i.h4,{id:"wham-docker",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"wham_docker"})]}),"\n",(0,r.jsx)(i.p,{children:"Wham docker image. If provided, runs the Wham tool."}),"\n",(0,r.jsxs)(i.h4,{id:"optional-reference_bwa_",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"reference_bwa_*"})]}),"\n",(0,r.jsx)(i.p,{children:"BWA-mem index files. Required only if running Scramble and the input reads are aligned to Dragen v3.7.8"}),"\n",(0,r.jsxs)(i.h4,{id:"optional-scramble_alignment_score_cutoff",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"scramble_alignment_score_cutoff"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"60"})," for Dragen v3.7.8 and ",(0,r.jsx)(i.code,{children:"90"})," otherwise. Minimum alignment score for consensus sequences again the MEI reference\nin the Scramble tool. The default value is set automatically depending on aligner. Can be overridden to tune\nsensitivity."]}),"\n",(0,r.jsxs)(i.h4,{id:"optional-scramble_percent_align_cutoff",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"scramble_percent_align_cutoff"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"70"}),". Minimum alignment percent for consensus sequences again the MEI reference in the Scramble tool. Can be\noverridden to tune sensitivity."]}),"\n",(0,r.jsxs)(i.h4,{id:"optional-scramble_min_clipped_reads_fraction",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"scramble_min_clipped_reads_fraction"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"0.22"}),". Minimum number of soft-clipped reads required for site cluster identification in the Scramble tool,\nas a fraction of average read depth. Can be overridden to tune sensitivity."]}),"\n",(0,r.jsx)(i.h3,{id:"advanced-parameters",children:"Advanced parameters"}),"\n",(0,r.jsxs)(i.h4,{id:"optional-run_localize_reads",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"run_localize_reads"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"false"}),". Copy input alignment files to the execution bucket before localizing to subsequent tasks. This\nmay be desirable when BAM/CRAM files are stored in a requester-pays bucket or in another region to avoid egress charges."]}),"\n",(0,r.jsx)(i.admonition,{type:"warning",children:(0,r.jsxs)(i.p,{children:["Enabling ",(0,r.jsx)(i.code,{children:"run_localize_reads"})," can incur high storage costs. If using, make sure to clean up execution directories after\nthe workflow finishes running."]})}),"\n",(0,r.jsxs)(i.h4,{id:"optional-run_module_metrics",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"run_module_metrics"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"true"}),". Calculate QC metrics for the sample. If true, ",(0,r.jsx)(i.code,{children:"primary_contigs_fai"})," must also be provided, and\noptionally the ",(0,r.jsx)(i.code,{children:"baseline_*_vcf"})," inputs to run comparisons."]}),"\n",(0,r.jsxs)(i.h4,{id:"optional-move_bam_or_cram_files",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"move_bam_or_cram_files"})]}),"\n",(0,r.jsxs)(i.p,{children:["Default: ",(0,r.jsx)(i.code,{children:"false"}),". Uses ",(0,r.jsx)(i.code,{children:"mv"})," instead of ",(0,r.jsx)(i.code,{children:"cp"})," when operating on local CRAM/BAM files in some tasks. This can result in\nsome performance improvement."]}),"\n",(0,r.jsx)(i.admonition,{type:"warning",children:(0,r.jsxs)(i.p,{children:["Do not use ",(0,r.jsx)(i.code,{children:"move_bam_or_cram_files"})," if running with a local backend or shared filesystem, as it may cause loss of\ninput data."]})}),"\n",(0,r.jsx)(i.h3,{id:"outputs",children:"Outputs"}),"\n",(0,r.jsxs)(i.h4,{id:"manta-vcf",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"manta_vcf"})]}),"\n",(0,r.jsxs)(i.p,{children:["VCF containing variants called by Manta. Enabled by providing ",(0,r.jsx)(i.a,{href:"#manta-docker",children:"manta_docker"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"melt-vcf",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"melt_vcf"})]}),"\n",(0,r.jsxs)(i.p,{children:["VCF containing variants called by MELT. Enabled by providing ",(0,r.jsx)(i.a,{href:"#melt-docker",children:"melt_docker"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"scramble-vcf",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"scramble_vcf"})]}),"\n",(0,r.jsxs)(i.p,{children:["VCF containing variants called by Scramble. Enabled by providing ",(0,r.jsx)(i.a,{href:"#scramble-docker",children:"scramble_docker"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"wham-vcf",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"wham_vcf"})]}),"\n",(0,r.jsxs)(i.p,{children:["VCF containing variants called by Wham. Enabled by providing ",(0,r.jsx)(i.a,{href:"#wham-docker",children:"wham_docker"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"coverage-counts",children:[(0,r.jsx)(c.$,{children:"Optional"}),"  ",(0,r.jsx)(i.code,{children:"coverage_counts"})]}),"\n",(0,r.jsxs)(i.p,{children:["Binned read counts collected by ",(0,r.jsx)(i.code,{children:"GATK-CollectReadCounts"})," (",(0,r.jsx)(i.code,{children:"*.counts.tsv.gz"}),"). Enabled with ",(0,r.jsx)(i.a,{href:"#collect-coverage",children:"collect_coverage"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"pesr-disc",children:[(0,r.jsx)(c.$,{children:"Optional"}),"  ",(0,r.jsx)(i.code,{children:"pesr_disc"})]}),"\n",(0,r.jsxs)(i.p,{children:["Discordant read pairs collected by ",(0,r.jsx)(i.code,{children:"GATK-CollectSVEvidence"})," (",(0,r.jsx)(i.code,{children:"*.pe.txt.gz"}),"). Enabled with ",(0,r.jsx)(i.a,{href:"#collect-pesr",children:"collect_pesr"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"pesr-split",children:[(0,r.jsx)(c.$,{children:"Optional"}),"  ",(0,r.jsx)(i.code,{children:"pesr_split"})]}),"\n",(0,r.jsxs)(i.p,{children:["Split read positions collected by ",(0,r.jsx)(i.code,{children:"GATK-CollectSVEvidence"})," (",(0,r.jsx)(i.code,{children:"*.sr.txt.gz"}),"). Enabled with ",(0,r.jsx)(i.a,{href:"#collect-pesr",children:"collect_pesr"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"pesr-sd",children:[(0,r.jsx)(c.$,{children:"Optional"}),"  ",(0,r.jsx)(i.code,{children:"pesr_sd"})]}),"\n",(0,r.jsxs)(i.p,{children:["Site depth counts collected by ",(0,r.jsx)(i.code,{children:"GATK-CollectSVEvidence"})," (",(0,r.jsx)(i.code,{children:"*.sd.txt.gz"}),"). Enabled with ",(0,r.jsx)(i.a,{href:"#collect-pesr",children:"collect_pesr"}),"."]}),"\n",(0,r.jsxs)(i.h4,{id:"optional-sample_metrics_files",children:[(0,r.jsx)(c.$,{children:"Optional"})," ",(0,r.jsx)(i.code,{children:"sample_metrics_files"})]}),"\n",(0,r.jsxs)(i.p,{children:["Sample metrics for QC. Enabled with ",(0,r.jsx)(i.a,{href:"#optional-run_module_metrics",children:"run_module_metrics"}),"."]})]})}function p(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},1944:(e,i,l)=>{l.d(i,{$:()=>r});var n=l(4848);const r=({children:e})=>(0,n.jsx)("span",{style:{backgroundColor:"var(--highlight-optional-arg-background-color)",borderRadius:"2px",color:"var(--highlight-optional-arg-text-color)",padding:"0.2rem"},children:e})},8453:(e,i,l)=>{l.d(i,{R:()=>c,x:()=>t});var n=l(6540);const r={},o=n.createContext(r);function c(e){const i=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);