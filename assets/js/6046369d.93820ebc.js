"use strict";(self.webpackChunkGATK_SV=self.webpackChunkGATK_SV||[]).push([[1767],{8274:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"gs/dockers","title":"Docker images","description":"Docker images","source":"@site/docs/gs/dockers.md","sourceDirName":"gs","slug":"/gs/dockers","permalink":"/gatk-sv/docs/gs/dockers","draft":false,"unlisted":false,"editUrl":"https://github.com/broadinstitute/gatk-sv/tree/master/website/docs/gs/dockers.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Docker images","description":"Docker images","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"SV/CNV callers","permalink":"/gatk-sv/docs/gs/sv_callers"},"next":{"title":"Runtime environments","permalink":"/gatk-sv/docs/gs/runtime-env"}}');var t=n(4848),o=n(8453);const r={title:"Docker images",description:"Docker images",sidebar_position:4},a=void 0,c={},l=[{value:"Publishing and availability",id:"publishing-and-availability",level:3},{value:"Regions (IMPORTANT)",id:"regions-important",level:3},{value:"Versioning",id:"versioning",level:3},{value:"Workflow inputs",id:"workflow-inputs",level:3},{value:"Builds",id:"builds",level:3}];function d(e){const i={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.p,{children:["GATK-SV utilizes a set of ",(0,t.jsx)(i.a,{href:"https://www.docker.com/",children:"Docker"})," images for execution within containerized environments."]}),"\n",(0,t.jsx)(i.h3,{id:"publishing-and-availability",children:"Publishing and availability"}),"\n",(0,t.jsxs)(i.p,{children:["Dockers are automatically built and pushed to the ",(0,t.jsx)(i.code,{children:"us.gcr.io/broad-dsde-methods/gatk-sv"})," repository under two different conditions:"]}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Release"}),": upon releasing a new version of GATK-SV. These Dockers are made permanently available."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Commit"}),': upon merging a new commit to the development branch. These Dockers are ephemeral and may be periodically\ndeleted. Any users needing to preserve access to these Docker images should copy them to their own repository. Also\nnote that these images are built on an "as-needed" basis, meaning an image is only updated if it has been changed\nin any way by the commit.']}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["The full set of current images are automatically published and pushed to a public\n",(0,t.jsx)(i.a,{href:"https://cloud.google.com/artifact-registry/docs",children:"Google Artifact Registry"})," and listed in the\n",(0,t.jsx)(i.a,{href:"https://github.com/broadinstitute/gatk-sv/blob/main/inputs/values/dockers.json",children:"dockers.json"}),"\nfile."]}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsxs)(i.p,{children:["Microsoft Azure mirrors of all images can be found in\n",(0,t.jsx)(i.a,{href:"https://github.com/broadinstitute/gatk-sv/blob/main/inputs/values/dockers_azure.json",children:"dockers_azure.json"}),",\nbut these are not currently available for public use."]})}),"\n",(0,t.jsx)(i.h3,{id:"regions-important",children:"Regions (IMPORTANT)"}),"\n",(0,t.jsxs)(i.p,{children:["Users using Google Compute VMs outside of the ",(0,t.jsx)(i.code,{children:"us-central1"})," region, i.e. in other NA regions or continents, must copy all\ndocker images to a repository hosted in their region. If using a Terra workspace, the region is listed under ",(0,t.jsx)(i.code,{children:"Cloud  Information"}),":",(0,t.jsx)(i.code,{children:"Location"})," in the workspace dashboard. Please see\n",(0,t.jsx)(i.a,{href:"https://support.terra.bio/hc/en-us/articles/4408985788187-How-to-configure-Google-Artifact-Registry-to-prevent-data-transfer-egress-charges",children:"this article"}),"\nfor more information."]}),"\n",(0,t.jsx)(i.admonition,{type:"warning",children:(0,t.jsx)(i.p,{children:"Failure to localize Docker images to your region will incur significant egress costs."})}),"\n",(0,t.jsx)(i.h3,{id:"versioning",children:"Versioning"}),"\n",(0,t.jsxs)(i.p,{children:["All Docker images are tagged with a date and version number that must be run with the corresponding version of the\nWDLs. The Docker images built with a particular version can be determined from the ",(0,t.jsx)(i.code,{children:"dockers.json"})," file by checking out\nthe commit or release of interest and examining ",(0,t.jsx)(i.code,{children:"dockers.json"}),", e.g.\n",(0,t.jsx)(i.a,{href:"https://github.com/broadinstitute/gatk-sv/blob/v0.29-beta/inputs/values/dockers.json",children:"v0.29-beta"}),"."]}),"\n",(0,t.jsx)(i.p,{children:'Note that a given commit may contain a mixture of Docker image version tags if only a subset of images has actually\nbeen updated, reflecting the "as-needed" rebuild policy described above.'}),"\n",(0,t.jsx)(i.p,{children:"All Terra workspace releases have the WDLs and Docker images synchronized."}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsx)(i.p,{children:"Cloning a Terra workspace copies a snapshot of the current workspace. Any future updates to the original workspace\nwill not be propagated to the clone."})}),"\n",(0,t.jsx)(i.admonition,{type:"warning",children:(0,t.jsx)(i.p,{children:"We strongly recommend using a single version of GATK-SV for all projects. Switching versions may lead to batch effects\nand/or compromise call set fidelity."})}),"\n",(0,t.jsx)(i.h3,{id:"workflow-inputs",children:"Workflow inputs"}),"\n",(0,t.jsxs)(i.p,{children:["All GATK-SV WDLs utilize a subset of the Docker images, which are specified as inputs. For example,\nthe ",(0,t.jsx)(i.code,{children:"sv_pipeline"})," docker is supplied to the input ",(0,t.jsx)(i.code,{children:"sv_pipeline_docker"})," in many WDLs."]}),"\n",(0,t.jsx)(i.h3,{id:"builds",children:"Builds"}),"\n",(0,t.jsxs)(i.p,{children:["An in-depth guide to the GATK-SV Docker system and building Docker images is available in the\n",(0,t.jsx)(i.a,{href:"/docs/category/docker-builds",children:"Advanced section"}),"."]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>a});var s=n(6540);const t={},o=s.createContext(t);function r(e){const i=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);